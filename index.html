<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="recetas.css">
  <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ffffff">

  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<style>
  body{
    background-color: rgba(255, 127, 225, 1);
  }
</style>
  

<script>
/* ---------- Registro del Service Worker (aseg√∫rate que sw.js est√© en la ra√≠z o ajusta la ruta) ---------- */
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js')
    .then(reg => {
      console.log('‚úîÔ∏è Service Worker registrado:', reg.scope);
    })
    .catch(err => console.error('‚ùå Error al registrar SW:', err));
}

/* ---------- Funci√≥n utilitaria para pedir permiso ---------- */
async function solicitarPermisoNotificaciones() {
  if (!('Notification' in window)) {
    alert('Este navegador no soporta notificaciones.');
    return false;
  }
  if (Notification.permission === 'granted') return true;
  const permiso = await Notification.requestPermission();
  return permiso === 'granted';
}

/* ---------- Escuchar submit del formulario de nueva receta ---------- */
document.addEventListener('DOMContentLoaded', () => {
  const form = document.querySelector('form[action="#"]'); // ajusta selector si tienes varios formularios
  if (!form) return;

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // Obtener campos
    const nombre = (document.getElementById('nombre') || {value:''}).value.trim();
    const ingredientes = (document.getElementById('ingredientes') || {value:''}).value.trim();
    const instrucciones = (document.getElementById('instrucciones') || {value:''}).value.trim();

    // Validaci√≥n sencilla
    if (!nombre) {
      alert('Por favor escribe el nombre de la receta.');
      return;
    }

    // Pedir permiso de notificaci√≥n (si no est√° concedido)
    const permitido = await solicitarPermisoNotificaciones();
    if (!permitido) {
      alert('Necesitas permitir notificaciones para recibir la alerta de la receta.');
      return;
    }

    // Preparar el cuerpo de la notificaci√≥n (truncar si es muy largo)
    const maxBody = 180;
    let cuerpo = `Ingredientes: ${ingredientes || '‚Äî'}\nInstrucciones: ${instrucciones || '‚Äî'}`;
    if (cuerpo.length > maxBody) {
      cuerpo = cuerpo.slice(0, maxBody - 3) + '...';
    }

    // Intentar obtener el registro del SW
    const swReg = await navigator.serviceWorker.getRegistration();

    const notificationOptions = {
      body: cuerpo,
      icon: '/imagenes/fav.png',           // ajusta ruta del icono
      badge: '/imagenes/fav.png',
      image: undefined,                    // opcional, pon URL si quieres imagen
      vibrate: [100, 50, 100],
      tag: 'recetario-nueva-receta',
      renotify: true,
      data: {                              // datos que quieres pasar al SW al click
        url: location.href,                // abrir la misma p√°gina (o una ruta espec√≠fica)
        nombre,
        ingredientes,
        instrucciones
      },
      actions: [
        { action: 'abrir', title: 'Abrir Receta' },
        { action: 'compartir', title: 'Compartir' }
      ]
    };

    // Mostrar notificaci√≥n usando el Service Worker si existe, si no usar Notification API directamente
    try {
      if (swReg && swReg.showNotification) {
        await swReg.showNotification(`Nueva receta: ${nombre}`, notificationOptions);
      } else {
        // Fallback: notificaci√≥n desde la ventana principal
        new Notification(`Nueva receta: ${nombre}`, notificationOptions);
      }
    } catch (err) {
      console.error('Error mostrando notificaci√≥n:', err);
    }

    // Aqu√≠ puedes seguir guardando la receta a localStorage o enviarla a servidor
    // Ejemplo: limpiar formulario
    form.reset();
  });
});
</script>



  <!-- √çcono de la app -->
  <link rel="shortcut icon" href="imagenes/fav.png" type="image/x-icon">

  <!-- Configuraci√≥n de Meta etiquetas para PWA -->
  <meta name="theme-color" content="#31FB00">
  <meta name="MobileOptimized" content="width">
  <meta name="HandheldFriendly" content="true">

  <!-- Meta etiquetas PWA para Apple -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="imagenes/fav.png">
  <link rel="apple-touch-startup-image" href="imagenes/fav.png">

  <!-- Manifest -->
  <link rel="manifest" href="manifest.json">

  <title>Recetario Personal</title>
  <link rel="stylesheet" href="recetas.css">

  <link rel="stylesheet" href="recetas.css">
  <script src=""></script>
  <script src="main.js"></script>
</head>
<body>

  <script>
const app = Vue.createApp({
  data() {
    return {
      mensaje: "Recetario Personal (Vue activo)"
    };
  }
});
app.mount("body");
</script>

<script>
const app1 = Vue.createApp({
  data() {
    return {
      mensaje: "Recetario Personal (Vue activo)"
    };
  },

  mounted() {
    // üî• Cambiar estilo de TODOS los inputs al cargar la p√°gina
    document.querySelectorAll("input, textarea, select").forEach(el => {
      el.classList.add("vue-input");
    });

    // üî• Cambiar estilo de TODOS los botones
    document.querySelectorAll("button").forEach(btn => {
      btn.classList.add("vue-btn");
    });

    // üî• Cambiar estilo de TODOS los textos
    document.querySelectorAll("h1, h2, h3, h4, p, label, a").forEach(tx => {
      tx.classList.add("vue-text");
    });
  }
});

app1.mount("body");
</script>



<!-- ====== HEADER ====== -->
<header id="main-header">
  <div class="container">
    <a href="#inicio">
      
    </a>
    
    <nav>
      <ul>
        <li><a href="#inicio">Inicio</a></li>
        <li><a href="#recetas">Recetas</a></li>
        <li><a href="#ideas">M√°s Recetas</a></li>
        <li><a href="#videos-recetas">Videos</a></li>
        <li><a href="#contacto">Contacto</a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="clearfix"></div>

<!-- ====== HERO / SLIDER ====== -->
<section class="hero" id="inicio">
  <h2>Bienvenido a tu Recetario</h2>
  <div class="carousel">
    <div class="slides">
      <img src="imagenes/img1.jpeg" alt="Receta 1" width="200" height="120">
      <img src="imagenes/img2.webp" alt="Receta 2" width="200" height="120">
      <img src="imagenes/img3.jpeg" alt="Receta 3" width="200" height="120">
      <img src="imagenes/img4.jpg" alt="Receta 4" width="200" height="120">
      <img src="imagenes/img5.jpeg" alt="Receta 5" width="200" height="120">
      <img src="imagenes/img6.jpeg" alt="Receta 6" width="200" height="120">
    </div>
  </div>
</section>

<!-- ====== RECETAS GUARDADAS ====== -->
<section class="section" id="recetas">
  <h3>Recetas Guardadas</h3>
  <div class="grid">
    <div class="card">
      <h4><a href="recetas/receta1.html">Receta 1</a></h4>
      <p>Descripci√≥n breve de la Receta 1.</p>
    </div>
    <div class="card">
      <h4><a href="recetas/receta2.html">Receta 2</a></h4>
      <p>Descripci√≥n breve de la Receta 2.</p>
    </div>
  </div>
</section>

<!-- ====== M√ÅS IDEAS ====== -->
<section class="section videos" id="ideas">
  <h3>Otras Ideas</h3>
  <div class="grid">
    <div class="card">
      <div class="thumb">
        <img src="imagenes/img1.jpeg" alt="Receta especial">
      </div>
      <h4>Receta especial</h4>
      <p>Peque√±a explicaci√≥n de la receta.</p>
    </div>
    <div class="card">
      <div class="thumb">
        <img src="imagenes/img2.webp" alt="Postre r√°pido">
      </div>
      <h4>Postre r√°pido</h4>
      <p>Peque√±a explicaci√≥n de la receta.</p>
    </div>
    <div class="card">
      <div class="thumb">
        <img src="imagenes/img3.jpeg" alt="Bebida refrescante">
      </div>
      <h4>Bebida refrescante</h4>
      <p>Peque√±a explicaci√≥n de la receta.</p>
    </div>
  </div>
</section>
<!-- ====== FORMULARIO NUEVA RECETA (REDUCIDO) ====== -->
<section class="section" id="nueva-receta">
  <h3 style="font-size: 16px; margin-bottom: 8px;">Agregar Nueva Receta</h3>

  <form action="#" method="POST" class="form-mini">

    <input type="text" id="nombre" name="nombre" placeholder="Nombre de la receta" class="input-mini">

    <textarea id="ingredientes" name="ingredientes" placeholder="Ingredientes" class="input-mini textarea-mini"></textarea>

    <textarea id="instrucciones" name="instrucciones" placeholder="Instrucciones" class="input-mini textarea-mini"></textarea>

   <button type="submit" class="btn-mini-small-1">Guardar</button>



    

  </form>
</section>


<!-- ====== VIDEOS DE RECETAS ====== -->
<section class="section" id="videos-recetas">
  <h3>Videos de Recetas</h3>
  <div class="videos-grid">
    <div class="video-card">
      <iframe src="https://tres-estrellas.com/nuestras-recetas?utm_source=goa&utm_medium=cpc&utm_campaign=aon&utm_term=recetas-dulces&utm_content=keywords&gad_source=2&gad_campaignid=19646922868&gclid=Cj0KCQiAi9rJBhCYARIsALyPDttb25ib-giPHLUcnnDiG_Pjkkvy7ZTZcNIy1wH-Of0yfX7akBgd9NIaAunKEALw_wcB" title="Ensalada de Quinoa" frameborder="0" allowfullscreen></iframe>
      <p>Ensalada de Quinoa</p>
    </div>
    <div class="video-card">
      <iframe src="https://tres-estrellas.com/nuestras-recetas?utm_source=goa&utm_medium=cpc&utm_campaign=aon&utm_term=recetas-dulces&utm_content=keywords&gad_source=2&gad_campaignid=19646922868&gclid=Cj0KCQiAi9rJBhCYARIsALyPDttb25ib-giPHLUcnnDiG_Pjkkvy7ZTZcNIy1wH-Of0yfX7akBgd9NIaAunKEALw_wcB" title="Tacos de Pollo" frameborder="0" allowfullscreen></iframe>
      <p>Tacos de Pollo</p>
    </div>
    <div class="video-card">
      <iframe src="https://tres-estrellas.com/nuestras-recetas?utm_source=goa&utm_medium=cpc&utm_campaign=aon&utm_term=recetas-dulces&utm_content=keywords&gad_source=2&gad_campaignid=19646922868&gclid=Cj0KCQiAi9rJBhCYARIsALyPDttb25ib-giPHLUcnnDiG_Pjkkvy7ZTZcNIy1wH-Of0yfX7akBgd9NIaAunKEALw_wcB" title="Smoothie Saludable" frameborder="0" allowfullscreen></iframe>
      <p>Smoothie Saludable</p>
    </div>
  </div>
</section>

<!-- formulario -->


<!-- ====== FOOTER / CONTACTO ====== -->
<footer id="contacto">
  <div class="container">
    <h2>Contacto</h2>
    <p>Env√≠ame un mensaje en cualquiera de estas redes sociales :)</p>
    <ul id="redes">
      <li><a href="#"><img src="https://th.bing.com/th/id/R.1fe0509568a6dffcd40e0f45e4c388b3?rik=w6lA%2ftmd0Dalsw&pid=ImgRaw&r=0" alt="Facebook"></a></li>
      <li><a href="#"><img src="https://tse3.mm.bing.net/th/id/OIP.oo9bI8v6wsoACVWdSsUO3AHaHa?rs=1&pid=ImgDetMain&o=7&rm=3" alt="Instagram"></a></li>
      <li><a href="#"><img src="https://wallpapercave.com/wp/wp7155552.jpg" alt="Insta"></a></li>
    </ul>
  </div>
</footer>


</body>
</html>




<!-- Registro del Service Worker -->
<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/Recetario_Personal/service-worker.js")
  .then(() => console.log("SW registrado"))
  .catch(err => console.log("Error SW:", err));
}
</script>

</body>
</html>
